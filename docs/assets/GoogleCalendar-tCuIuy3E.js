import{v as G,j as e,y as W,z as te,r,p as d,B as m,L as ae,D as R,a as le,P as ne,b as A,c as O,d as B,I as j,F as ce,C as y,n as v,o as N,q as H,l as w,G as re,w as ie,u as b,H as K,M as P,f as q,J}from"./index-DCnD7E4S.js";/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const de=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]],oe=G("circle-alert",de);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const me=[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],xe=G("circle-check-big",me);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ge=[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]],M=G("refresh-cw",ge),he=te("relative w-full rounded-lg border px-4 py-3 text-sm grid has-[>svg]:grid-cols-[calc(var(--spacing)*4)_1fr] grid-cols-[0_1fr] has-[>svg]:gap-x-3 gap-y-0.5 items-start [&>svg]:size-4 [&>svg]:translate-y-0.5 [&>svg]:text-current",{variants:{variant:{default:"bg-card text-card-foreground",destructive:"text-destructive bg-card [&>svg]:text-current *:data-[slot=alert-description]:text-destructive/90"}},defaultVariants:{variant:"default"}});function V({className:n,variant:x,...i}){return e.jsx("div",{"data-slot":"alert",role:"alert",className:W(he({variant:x}),n),...i})}function F({className:n,...x}){return e.jsx("div",{"data-slot":"alert-description",className:W("text-muted-foreground col-start-2 grid justify-items-start gap-1 text-sm [&_p]:leading-relaxed",n),...x})}const I=[{value:"work",label:"업무",color:"bg-blue-500"},{value:"personal",label:"개인",color:"bg-green-500"},{value:"family",label:"가족",color:"bg-red-500"},{value:"research",label:"연구",color:"bg-purple-500"}];function pe(){const[n,x]=r.useState([]),[i,U]=r.useState(new Date),[Q,C]=r.useState(!1),[l,L]=r.useState(null),[D,S]=r.useState(!1),[u,g]=r.useState(!1),[T,p]=r.useState(null),[c,o]=r.useState({title:"",description:"",date:d(new Date,"yyyy-MM-dd"),time:"",location:"",type:"personal"});r.useEffect(()=>{const s=localStorage.getItem("calendarEvents"),t=localStorage.getItem("googleCalendarConnected"),a=localStorage.getItem("lastGoogleSync");s&&x(JSON.parse(s)),t==="true"&&S(!0),a&&p(a)},[]);const k=s=>{x(s),localStorage.setItem("calendarEvents",JSON.stringify(s))},X=()=>{if(!c.title.trim())return;const s={id:Date.now().toString(),...c},t=[...n,s].sort((a,f)=>{const E=new Date(a.date+" "+(a.time||"00:00")),se=new Date(f.date+" "+(f.time||"00:00"));return E.getTime()-se.getTime()});k(t),o({title:"",description:"",date:d(new Date,"yyyy-MM-dd"),time:"",location:"",type:"personal"}),C(!1)},_=s=>n.filter(t=>{const a=new Date(t.date);return J(a,s)}),h=s=>I.find(t=>t.value===s)||I[1],$=()=>{const s=new Date;return n.filter(t=>new Date(t.date)>=s).slice(0,5)},z=()=>{const s=new Date;return n.filter(t=>J(new Date(t.date),s))},Y=async()=>{g(!0);try{await new Promise(a=>setTimeout(a,2e3)),S(!0),g(!1),p(new Date().toLocaleString("ko-KR")),localStorage.setItem("googleCalendarConnected","true"),localStorage.setItem("lastGoogleSync",new Date().toLocaleString("ko-KR"));const s=[{id:"google_1",title:"회사 미팅",description:"프로젝트 진행상황 논의",date:d(new Date,"yyyy-MM-dd"),time:"14:00",location:"회의실 A",type:"work"},{id:"google_2",title:"논문 스터디",description:"LLM 관련 논문 리뷰",date:d(new Date(Date.now()+864e5),"yyyy-MM-dd"),time:"19:00",location:"온라인",type:"research"},{id:"google_3",title:"스똥시와 데이트",description:"영화 보기",date:d(new Date(Date.now()+2*864e5),"yyyy-MM-dd"),time:"19:30",location:"CGV",type:"family"}],t=[...n,...s];k(t)}catch(s){console.error("Google Calendar 연동 실패:",s),g(!1),alert("Google Calendar 연동에 실패했습니다. 나중에 다시 시도해주세요.")}},Z=()=>{D&&(g(!0),setTimeout(()=>{g(!1),p(new Date().toLocaleString("ko-KR")),localStorage.setItem("lastGoogleSync",new Date().toLocaleString("ko-KR"))},1500))},ee=()=>{S(!1),p(null),localStorage.removeItem("googleCalendarConnected"),localStorage.removeItem("lastGoogleSync");const s=n.filter(t=>!t.id.startsWith("google_"));k(s)};return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex flex-col lg:flex-row justify-between items-start lg:items-center gap-4",children:[e.jsxs("div",{children:[e.jsx("h2",{children:"캘린더"}),e.jsx("p",{className:"text-muted-foreground",children:"일정 관리 및 구글 캘린더 연동"}),T&&e.jsxs("p",{className:"text-xs text-muted-foreground mt-1",children:["마지막 동기화: ",T]})]}),e.jsxs("div",{className:"flex flex-wrap gap-2",children:[D?e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(m,{variant:"outline",size:"sm",onClick:Z,disabled:u,className:"flex items-center gap-2",children:[u?e.jsx(M,{className:"h-4 w-4 animate-spin"}):e.jsx(M,{className:"h-4 w-4"}),"동기화"]}),e.jsx(m,{variant:"outline",size:"sm",onClick:ee,className:"text-red-600 hover:text-red-700",children:"연동 해제"})]}):e.jsxs(m,{variant:"outline",onClick:Y,disabled:u,className:"flex items-center gap-2",children:[u?e.jsx(M,{className:"h-4 w-4 animate-spin"}):e.jsx(ae,{className:"h-4 w-4"}),"구글 캘린더 연동"]}),e.jsxs(R,{open:Q,onOpenChange:C,children:[e.jsx(le,{asChild:!0,children:e.jsxs(m,{children:[e.jsx(ne,{className:"h-4 w-4 mr-2"}),"일정 추가"]})}),e.jsxs(A,{className:"max-w-md sm:max-w-xl lg:max-w-2xl max-h-[90vh] overflow-y-auto w-[95vw] sm:w-[90vw]",children:[e.jsx(O,{children:e.jsx(B,{children:"새 일정 추가"})}),e.jsxs("div",{className:"space-y-3 sm:space-y-4 p-1 sm:p-0",children:[e.jsx(j,{placeholder:"일정 제목",value:c.title,onChange:s=>o(t=>({...t,title:s.target.value})),className:"text-sm sm:text-base"}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3",children:[e.jsx(j,{type:"date",value:c.date,onChange:s=>o(t=>({...t,date:s.target.value})),className:"text-sm"}),e.jsx(j,{type:"time",value:c.time,onChange:s=>o(t=>({...t,time:s.target.value})),placeholder:"시간 (선택사항)",className:"text-sm"})]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3",children:[e.jsx("select",{value:c.type,onChange:s=>o(t=>({...t,type:s.target.value})),className:"flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm",children:I.map(s=>e.jsx("option",{value:s.value,children:s.label},s.value))}),e.jsx(j,{placeholder:"장소 (선택사항)",value:c.location,onChange:s=>o(t=>({...t,location:s.target.value})),className:"text-sm"})]}),e.jsx(ce,{placeholder:"일정 설명",value:c.description,onChange:s=>o(t=>({...t,description:s.target.value})),rows:2,className:"text-sm"}),e.jsxs("div",{className:"flex justify-end gap-2 pt-2 border-t",children:[e.jsx(m,{variant:"outline",onClick:()=>C(!1),size:"sm",children:"취소"}),e.jsx(m,{onClick:X,disabled:!c.title.trim(),size:"sm",children:"저장"})]})]})]})]})]})]}),D?e.jsxs(V,{className:"border-green-200 bg-green-50",children:[e.jsx(xe,{className:"h-4 w-4 text-green-600"}),e.jsx(F,{className:"text-green-800",children:"구글 캘린더와 연동되었습니다. 일정이 자동으로 동기화됩니다."})]}):e.jsxs(V,{className:"border-amber-200 bg-amber-50",children:[e.jsx(oe,{className:"h-4 w-4 text-amber-600"}),e.jsx(F,{className:"text-amber-800",children:e.jsxs("div",{className:"space-y-2",children:[e.jsx("p",{children:"구글 캘린더 연동이 필요합니다."}),e.jsxs("div",{className:"text-sm space-y-1",children:[e.jsx("p",{children:e.jsx("strong",{children:"연동 후 사용 가능한 기능:"})}),e.jsxs("ul",{className:"list-disc list-inside space-y-1 text-xs",children:[e.jsx("li",{children:"기존 구글 캘린더 일정 자동 가져오기"}),e.jsx("li",{children:"양방향 일정 동기화"}),e.jsx("li",{children:"구글 캘린더 바로가기"}),e.jsx("li",{children:"실시간 일정 업데이트"})]})]})]})})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-5 gap-6",children:[e.jsxs(y,{className:"lg:col-span-4",children:[e.jsx(v,{children:e.jsxs(N,{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(H,{className:"h-5 w-5"}),"캘린더"]}),e.jsx(m,{variant:"outline",size:"sm",onClick:()=>window.open("https://calendar.google.com","_blank"),className:"hidden sm:flex",children:"구글 캘린더 열기"})]})}),e.jsx(w,{children:e.jsx(re,{mode:"single",selected:i,onSelect:U,locale:b,className:"rounded-md border w-full",classNames:{months:"flex flex-col sm:flex-row space-y-4 sm:space-x-4 sm:space-y-0",month:"space-y-4 w-full",caption:"flex justify-center pt-1 relative items-center",caption_label:"text-lg font-medium",nav:"space-x-1 flex items-center",nav_button:"h-7 w-7 bg-transparent p-0 opacity-50 hover:opacity-100",table:"w-full border-collapse space-y-1",head_row:"flex w-full",head_cell:"text-muted-foreground rounded-md w-full font-normal text-[0.8rem]",row:"flex w-full mt-2",cell:"relative p-0 text-center text-sm focus-within:relative focus-within:z-20 w-full h-20",day:"h-full w-full p-2 font-normal hover:bg-accent hover:text-accent-foreground flex flex-col items-start justify-start rounded-md",day_selected:"bg-primary text-primary-foreground",day_today:"bg-accent text-accent-foreground",day_outside:"text-muted-foreground opacity-50",day_disabled:"text-muted-foreground opacity-50",day_range_middle:"aria-selected:bg-accent aria-selected:text-accent-foreground",day_hidden:"invisible"},components:{DayContent:ie.memo(({date:s})=>{const t=_(s);return e.jsxs("div",{className:"w-full h-full flex flex-col",children:[e.jsxs("div",{className:"flex justify-between items-start mb-1",children:[e.jsx("span",{className:"text-sm font-medium",children:s.getDate()}),t.length>0&&e.jsx("div",{className:"text-xs bg-blue-500 text-white rounded-full px-1.5 py-0.5 min-w-[20px] text-center",children:t.length})]}),e.jsxs("div",{className:"flex-1 space-y-1",children:[t.slice(0,2).map((a,f)=>{const E=h(a.type);return e.jsxs("div",{className:`text-xs p-1 rounded truncate ${E.color} text-white`,title:`${a.time?a.time+" - ":""}${a.title}`,children:[a.time&&e.jsx("span",{className:"block text-xs opacity-80",children:a.time}),e.jsx("span",{className:"block truncate",children:a.title})]},`${a.id||f}`)}),t.length>2&&e.jsxs("div",{className:"text-xs text-muted-foreground",children:["+",t.length-2,"개 더"]})]})]})})}})})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs(y,{children:[e.jsx(v,{children:e.jsxs(N,{className:"text-lg",children:[i?d(i,"M월 d일",{locale:b}):"오늘"," 일정"]})}),e.jsx(w,{children:i?e.jsx("div",{className:"space-y-2",children:_(i).length===0?e.jsx("p",{className:"text-muted-foreground text-sm",children:"일정이 없습니다."}):_(i).map(s=>{const t=h(s.type);return e.jsx("div",{className:"p-3 border rounded-lg cursor-pointer hover:shadow-sm transition-shadow",onClick:()=>L(s),children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx("div",{className:`w-3 h-3 rounded-full ${t.color}`}),e.jsx("h5",{className:"font-medium",children:s.title})]}),s.time&&e.jsxs("div",{className:"flex items-center gap-1 text-xs text-muted-foreground",children:[e.jsx(K,{className:"h-3 w-3"}),s.time]}),s.location&&e.jsxs("div",{className:"flex items-center gap-1 text-xs text-muted-foreground",children:[e.jsx(P,{className:"h-3 w-3"}),s.location]})]}),e.jsx(q,{variant:"outline",className:"text-xs",children:t.label})]})},s.id)})}):e.jsx("p",{className:"text-muted-foreground text-sm",children:"날짜를 선택해주세요."})})]}),e.jsxs(y,{children:[e.jsx(v,{children:e.jsx(N,{className:"text-lg",children:"오늘의 일정"})}),e.jsx(w,{children:e.jsx("div",{className:"space-y-2",children:z().length===0?e.jsx("p",{className:"text-muted-foreground text-sm",children:"오늘 일정이 없습니다."}):z().map(s=>{const t=h(s.type);return e.jsxs("div",{className:"flex items-center gap-2 p-2 border rounded",children:[e.jsx("div",{className:`w-2 h-2 rounded-full ${t.color}`}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"text-sm font-medium",children:s.title}),s.time&&e.jsx("p",{className:"text-xs text-muted-foreground",children:s.time})]})]},s.id)})})})]}),e.jsxs(y,{children:[e.jsx(v,{children:e.jsx(N,{className:"text-lg",children:"다가오는 일정"})}),e.jsx(w,{children:e.jsx("div",{className:"space-y-2",children:$().length===0?e.jsx("p",{className:"text-muted-foreground text-sm",children:"예정된 일정이 없습니다."}):$().map(s=>{const t=h(s.type);return e.jsxs("div",{className:"flex items-center gap-2 p-2 border rounded",children:[e.jsx("div",{className:`w-2 h-2 rounded-full ${t.color}`}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"text-sm font-medium",children:s.title}),e.jsxs("p",{className:"text-xs text-muted-foreground",children:[d(new Date(s.date),"M월 d일",{locale:b}),s.time&&` ${s.time}`]})]})]},s.id)})})})]})]})]}),e.jsx(R,{open:!!l,onOpenChange:()=>L(null),children:e.jsxs(A,{children:[e.jsx(O,{children:e.jsx(B,{children:l?.title})}),l&&e.jsxs("div",{className:"space-y-4",children:[e.jsx("div",{className:"flex items-center gap-2",children:e.jsx(q,{variant:"outline",children:h(l.type).label})}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[e.jsx(H,{className:"h-4 w-4 text-muted-foreground"}),d(new Date(l.date),"yyyy년 M월 d일",{locale:b})]}),l.time&&e.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[e.jsx(K,{className:"h-4 w-4 text-muted-foreground"}),l.time]}),l.location&&e.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[e.jsx(P,{className:"h-4 w-4 text-muted-foreground"}),l.location]})]}),l.description&&e.jsxs("div",{children:[e.jsx("h5",{className:"mb-2",children:"설명"}),e.jsx("p",{className:"text-sm whitespace-pre-wrap border p-3 rounded bg-muted/50",children:l.description})]})]})]})})]})}export{pe as default};

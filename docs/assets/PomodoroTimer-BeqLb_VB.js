import{v,w as j,j as e,r as i,p as I,D as H,a as W,B as p,b as G,c as K,d as Q,e as X,I as k,C as w,n as b,o as C,x as Y,l as B,q as Z,f as O,u as ee}from"./index-DCnD7E4S.js";/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const se=[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]],te=v("chart-column",se);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ae=[["path",{d:"M10 2v2",key:"7u0qdc"}],["path",{d:"M14 2v2",key:"6buw04"}],["path",{d:"M16 8a1 1 0 0 1 1 1v8a4 4 0 0 1-4 4H7a4 4 0 0 1-4-4V9a1 1 0 0 1 1-1h14a4 4 0 1 1 0 8h-1",key:"pwadti"}],["path",{d:"M6 2v2",key:"colzsn"}]],ne=v("coffee",ae);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const re=[["rect",{x:"14",y:"4",width:"4",height:"16",rx:"1",key:"zuxfzm"}],["rect",{x:"6",y:"4",width:"4",height:"16",rx:"1",key:"1okwgv"}]],ie=v("pause",re);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const le=[["polygon",{points:"6 3 20 12 6 21 6 3",key:"1oa8hb"}]],ce=v("play",le);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oe=[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]],de=v("rotate-ccw",oe);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ue=[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],xe=v("settings",ue),me=j.memo(function({timeLeft:l,totalTime:r,isActive:N,isBreak:g}){const x=j.useMemo(()=>(r-l)/r*100,[r,l]),f=j.useMemo(()=>2*Math.PI*120,[]),o=j.useMemo(()=>f-x/100*f,[f,x]),m=j.useCallback(d=>{const n=Math.floor(d/60),c=d%60;return`${n.toString().padStart(2,"0")}:${c.toString().padStart(2,"0")}`},[]);return e.jsxs("div",{className:"relative w-80 h-80 flex items-center justify-center",children:[e.jsxs("svg",{className:"w-80 h-80 transform -rotate-90",width:"320",height:"320",children:[e.jsx("circle",{cx:"160",cy:"160",r:"120",stroke:"currentColor",strokeWidth:"8",fill:"transparent",className:"text-muted-foreground/20"}),e.jsx("circle",{cx:"160",cy:"160",r:"120",stroke:"currentColor",strokeWidth:"8",fill:"transparent",strokeDasharray:f,strokeDashoffset:o,className:`transition-all duration-1000 ease-linear ${g?"text-blue-500":"text-red-500"}`,strokeLinecap:"round"})]}),e.jsxs("div",{className:"absolute inset-0 flex flex-col items-center justify-center",children:[e.jsx("div",{className:`text-6xl font-bold transition-colors ${g?"text-blue-500":"text-red-500"}`,children:m(l)}),e.jsxs("div",{className:"mt-4 flex items-center gap-2",children:[e.jsx("div",{className:`w-3 h-3 rounded-full ${N?g?"bg-blue-500 animate-pulse":"bg-red-500 animate-pulse":"bg-muted-foreground"}`}),e.jsx("span",{className:"text-sm text-muted-foreground",children:N?g?"휴식 중":"집중 중":"정지됨"})]}),e.jsxs("div",{className:"mt-2 text-sm text-muted-foreground",children:[Math.round(x),"%"]})]}),j.useMemo(()=>Array.from({length:12},(d,n)=>{const c=n*30-90,h=c*Math.PI/180,D=160+140*Math.cos(h),T=160+140*Math.sin(h);return e.jsx("div",{className:"absolute w-1 h-6 bg-muted-foreground/40",style:{left:`${D}px`,top:`${T}px`,transform:`translate(-50%, -50%) rotate(${c+90}deg)`,transformOrigin:"center"}},n)}),[])]})});function ge(){const[t,l]=i.useState({focusMinutes:25,shortBreakMinutes:5,longBreakMinutes:15,sessionsUntilLongBreak:4}),[r,N]=i.useState([]),[g,x]=i.useState(!1),[f,o]=i.useState(t.focusMinutes*60),[m,d]=i.useState(!1),[n,c]=i.useState(!1),[h,D]=i.useState(0),[T,_]=i.useState(null),y=i.useRef(null);i.useEffect(()=>{const s=localStorage.getItem("pomodoroSessions"),a=localStorage.getItem("pomodoroSettings");if(s&&N(JSON.parse(s)),a){const u=JSON.parse(a);l(u),o(u.focusMinutes*60)}},[]),i.useEffect(()=>(m?y.current=setInterval(()=>{o(s=>s<=1?(U(),0):s-1)},1e3):y.current&&clearInterval(y.current),()=>{y.current&&clearInterval(y.current)}),[m]);const $=s=>{N(s),localStorage.setItem("pomodoroSessions",JSON.stringify(s))},F=s=>{l(s),localStorage.setItem("pomodoroSettings",JSON.stringify(s))},U=()=>{if(d(!1),n)c(!1),o(t.focusMinutes*60);else{const s=h+1;D(s);const a=I(new Date,"yyyy-MM-dd");if(r.find(M=>M.date===a)){const M=r.map(S=>S.date===a?{...S,completedSessions:S.completedSessions+1,totalFocusMinutes:S.totalFocusMinutes+t.focusMinutes}:S);$(M)}else{const M={id:Date.now().toString(),date:a,focusTime:t.focusMinutes,breakTime:t.shortBreakMinutes,completedSessions:1,totalFocusMinutes:t.focusMinutes};$([M,...r])}c(!0);const A=s%t.sessionsUntilLongBreak===0;o((A?t.longBreakMinutes:t.shortBreakMinutes)*60)}console.log("Timer completed!")},P=()=>{d(!0),!T&&!n&&_(new Date)},R=()=>{d(!1)},V=()=>{d(!1),c(!1),o(t.focusMinutes*60),_(null)},q=()=>n?(h%t.sessionsUntilLongBreak===0?t.longBreakMinutes:t.shortBreakMinutes)*60:t.focusMinutes*60,E=()=>{const s=I(new Date,"yyyy-MM-dd");return r.find(u=>u.date===s)||{completedSessions:0,totalFocusMinutes:0}},J=()=>{const s=new Date;return s.setDate(s.getDate()-7),r.filter(a=>new Date(a.date)>=s).reduce((a,u)=>({sessions:a.sessions+u.completedSessions,minutes:a.minutes+u.totalFocusMinutes}),{sessions:0,minutes:0})},L=E(),z=J();return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsx("h2",{children:"뽀모도로 타이머"}),e.jsx("p",{className:"text-muted-foreground",children:"집중과 휴식의 균형으로 생산성 향상"})]}),e.jsxs(H,{open:g,onOpenChange:x,children:[e.jsx(W,{asChild:!0,children:e.jsxs(p,{variant:"outline",children:[e.jsx(xe,{className:"h-4 w-4 mr-2"}),"설정"]})}),e.jsxs(G,{children:[e.jsxs(K,{children:[e.jsx(Q,{children:"뽀모도로 설정"}),e.jsx(X,{children:"뽀모도로 타이머 설정을 변경하세요."})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-sm",children:"집중 시간 (분)"}),e.jsx(k,{type:"number",value:t.focusMinutes,onChange:s=>l(a=>({...a,focusMinutes:Number(s.target.value)})),min:"1",max:"60"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm",children:"짧은 휴식 (분)"}),e.jsx(k,{type:"number",value:t.shortBreakMinutes,onChange:s=>l(a=>({...a,shortBreakMinutes:Number(s.target.value)})),min:"1",max:"30"})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-sm",children:"긴 휴식 (분)"}),e.jsx(k,{type:"number",value:t.longBreakMinutes,onChange:s=>l(a=>({...a,longBreakMinutes:Number(s.target.value)})),min:"1",max:"60"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm",children:"긴 휴식까지 세션 수"}),e.jsx(k,{type:"number",value:t.sessionsUntilLongBreak,onChange:s=>l(a=>({...a,sessionsUntilLongBreak:Number(s.target.value)})),min:"2",max:"10"})]})]}),e.jsxs("div",{className:"flex justify-end gap-2",children:[e.jsx(p,{variant:"outline",onClick:()=>x(!1),children:"취소"}),e.jsx(p,{onClick:()=>{F(t),m||(o(t.focusMinutes*60),c(!1)),x(!1)},children:"저장"})]})]})]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsxs(w,{children:[e.jsxs(b,{className:"text-center",children:[e.jsxs(C,{className:"flex items-center justify-center gap-2",children:[n?e.jsx(ne,{className:"h-5 w-5 text-blue-500"}):e.jsx(Y,{className:"h-5 w-5 text-red-500"}),n?"휴식 시간":"집중 시간"]}),!n&&e.jsxs("div",{className:"text-sm text-muted-foreground",children:["세션 ",h+1," / ",t.sessionsUntilLongBreak]})]}),e.jsxs(B,{className:"space-y-6",children:[e.jsx("div",{className:"flex justify-center",children:e.jsx(me,{timeLeft:f,totalTime:q(),isActive:m,isBreak:n})}),e.jsxs("div",{className:"flex justify-center gap-4",children:[m?e.jsxs(p,{onClick:R,size:"lg",variant:"outline",children:[e.jsx(ie,{className:"h-4 w-4 mr-2"}),"일시정지"]}):e.jsxs(p,{onClick:P,size:"lg",children:[e.jsx(ce,{className:"h-4 w-4 mr-2"}),"시작"]}),e.jsxs(p,{onClick:V,size:"lg",variant:"outline",children:[e.jsx(de,{className:"h-4 w-4 mr-2"}),"리셋"]})]}),n&&e.jsxs("div",{className:"text-center text-sm text-muted-foreground",children:[h%t.sessionsUntilLongBreak===0?"긴 휴식":"짧은 휴식"," 중입니다"]})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs(w,{children:[e.jsx(b,{children:e.jsxs(C,{className:"flex items-center gap-2",children:[e.jsx(Z,{className:"h-4 w-4"}),"오늘의 기록"]})}),e.jsx(B,{children:e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-2xl",children:L.completedSessions}),e.jsx("div",{className:"text-sm text-muted-foreground",children:"완료 세션"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-2xl",children:L.totalFocusMinutes}),e.jsx("div",{className:"text-sm text-muted-foreground",children:"집중 시간 (분)"})]})]})})]}),e.jsxs(w,{children:[e.jsx(b,{children:e.jsxs(C,{className:"flex items-center gap-2",children:[e.jsx(te,{className:"h-4 w-4"}),"주간 통계"]})}),e.jsx(B,{children:e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-2xl",children:z.sessions}),e.jsx("div",{className:"text-sm text-muted-foreground",children:"총 세션"})]}),e.jsxs("div",{className:"text-center",children:[e.jsxs("div",{className:"text-2xl",children:[Math.round(z.minutes/60*10)/10,"h"]}),e.jsx("div",{className:"text-sm text-muted-foreground",children:"총 집중 시간"})]})]})})]}),e.jsxs(w,{children:[e.jsx(b,{children:e.jsx(C,{children:"최근 기록"})}),e.jsx(B,{children:e.jsxs("div",{className:"space-y-2",children:[r.slice(0,5).map(s=>e.jsxs("div",{className:"flex justify-between items-center p-2 border rounded",children:[e.jsx("div",{className:"text-sm",children:I(new Date(s.date),"M월 d일",{locale:ee})}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(O,{variant:"outline",children:[s.completedSessions,"세션"]}),e.jsxs(O,{variant:"outline",children:[s.totalFocusMinutes,"분"]})]})]},s.id)),r.length===0&&e.jsx("p",{className:"text-sm text-muted-foreground text-center py-4",children:"아직 기록이 없습니다"})]})})]})]})]})]})}export{ge as default};
